<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <title>Messages</title>
    <link rel="stylesheet" href="/css/styleCompanyMessageFromSystem.css">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
<nav class="navbar">
    <a href="/companyWorker/homePage/<%=mail%>">
        <img class="logo" src="/css/images/logo.PNG">
    </a>
    <ul>
        <li><a href="/companyWorker/editProfile/<%=mail%>"><i class="fa fa-fw fa-home"></i>My Profile</a> </li>
        <li><a href="/companyWorker/allEmployer/<%=mail%>"><i class="fa fa-fw fa-search"></i>Employers</a> </li>
        <li><a href="/companyWorker/allCompany/<%=mail%>"><i class="fa fa-fw fa-search"></i>Contractor Workers</a> </li>
        <li><a href="/companyWorker/info/<%=mail%>"><i class="fa fa-fw fa-pie-chart"></i>Statistics</a> </li>
        <li><a href="/contractorWorker/sendMessageDiplay/<%=mail%>"><i class="fa fa-fw fa-envelope"></i>Messages</a> </li>
        <li><a href="/companyWorker/companyMessageList/<%=mail%>"><i class="fa fa-fw fa-envelope"></i>System Messages</a> </li>
        <li><a href="/"><i class="fa fa-fw fa-sign-out"></i>Log Out</a> </li>
    </ul>
</nav>

<form id="form" name="form" action="/companyWorker/upDateTime/<%=mail%>" method="POST">
<div class="container">
    <div class="row col-md-6 col-offset-2 custyle">
        <div class="page-header">
            <div class="title"><h2><small class="pull-right"></small>Messages</h2></div>
        </div>
                <%
                if(message.length!=0) {
                    var i=1;
                    var d=new Date();
                message.forEach(function(result){
                %>
                <div class="container row">
                    <div class="user-details d row">
                <%if(result.type == "EmptyShift"){%>
                    <div class="col-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="80"  fill="currentColor" class="bi bi-calendar-x" viewBox="0 0 16 16">
                            <path d="M6.146 7.146a.5.5 0 0 1 .708 0L8 8.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 9l1.147 1.146a.5.5 0 0 1-.708.708L8 9.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 9 6.146 7.854a.5.5 0 0 1 0-.708z"/>
                            <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                        </svg>
                    </div>
                    <div class="col-8">
                        <span class="text" ><%= result.text %></span>
                        </div>
                <%}%>
                <%if(result.type == "ErrorReported"){%>
                    <div class="col-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="80"  fill="currentColor" class="bi bi-exclamation-lg" viewBox="0 0 16 16">
                            <path d="M6.002 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm.195-12.01a1.81 1.81 0 1 1 3.602 0l-.701 7.015a1.105 1.105 0 0 1-2.2 0l-.7-7.015z"/>
                        </svg>
                    </div>
                    <div class="col-8">
                         <span class="text" ><%= result.text %></span>
                     </div>
                <%}%>
                    <div class="input-box">
                        <label class="details">Job Scope </label>
                        <span class="input" ><%= result.jobScope %></span>
                    </div>
                    <div class="input-box" >
                        <label class="details">Start Time </label>
                        <span class="input"><%= result.startTime %></span>
                    </div>
                    <div class="input-box">
                        <label class="details">End Time</label>
                        <span class="input" ><%= result.endTime %></span>
                    </div>
                     <div class="input-box" data-error="Error message">
                            <span class="details">Update Start</span>
                            <input type="text" class="input" placeholder="start Time" name="startTime" id="startTime" required>
                        </div>
                        <div class="input-box" data-error="Error message">
                            <span class="details">Update End</span>
                            <input type="text" class="input" placeholder="end Time" name="endTime" id="endTime" required>
                            <input type="hidden" class="input" value="<%=result.employmentId%>" name="id" id="id" required>

                        </div>

                     <div class="button">
                        <input  value="update" onclick="update()"  readonly>
                    </div>
                    </div>
        <% i++;}) %>
        <% }

    else{ %>
            <div class="h3"><h3>No message found ..</h3> </div>
        <% } %>
    </div>
</div>
</div>
</form>
</body>
<script >



function update()
{
    //עדכון בדטה בייס
    const form=document.getElementById("form");
    const startTime=document.getElementById("startTime");
    const endTime=document.getElementById("endTime");
    document.getElementById("form").submit();
}
</script>
</html>